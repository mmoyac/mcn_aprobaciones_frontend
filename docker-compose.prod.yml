# =====================================
# Docker Compose - MCN Aprobaciones Frontend
# Solo frontend, el proxy/SSL lo maneja /root/docker/nginx-proxy
# =====================================
version: '3.8'

services:
  frontend:
    image: mmoyac/mcn_aprobaciones_frontend:latest
    container_name: mcn_frontend
    restart: always
    environment:
      - NEXT_PUBLIC_API_URL=https://api.lexastech.cl/api/v1
      - NODE_ENV=production
    networks:
      - general-net
    healthcheck:
      test: ["CMD", "node", "-e", "require('http').get('http://localhost:3000/', (res) => { process.exit(res.statusCode === 200 ? 0 : 1); })"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

networks:
  general-net:
    external: true
